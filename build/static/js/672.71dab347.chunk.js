"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[672],{1779:(e,t,a)=>{a.r(t),a.d(t,{default:()=>C});var s=a(8261),n=a(3248),i=a(7097),r=a(5043),l=a(2970),o=a(7562),d=a(156),m=a(9193),c=a(6046),u=a(5679),h=a(6963),p=a(3892),g=a(4061),j=a(579);const x=e=>{let{filters:t,setFilters:a}=e;const s=(0,p.Wx)({initialValues:t});return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(h.A,{children:(0,j.jsx)(g.A,{title:"test filter"})}),(0,j.jsxs)(h.A,{children:[(0,j.jsx)(g.A,{title:"test filter"}),(0,j.jsx)(g.A,{title:"test filter"}),(0,j.jsx)(g.A,{title:"test filter"})]}),(0,j.jsx)(u.A,{values:s.values,resetForm:s.resetForm,setFilters:a})]})};var A=a(899),v=a(4263),S=a(4473);const f=[{name:"image",headerName:"image",getCell:e=>{let{row:t}=e;return t.image?(0,j.jsx)("img",{src:t.image.startsWith("http")?t.image:"".concat(S.b,"/").concat(t.image),alt:t.name,style:{width:50,height:50,objectFit:"cover",borderRadius:"8px"}}):(0,j.jsx)("span",{style:{color:"#999"},children:"No image"})}},{name:"name",headerName:"name",sort:!0},{name:"createdAt",headerName:"created at",getCell:e=>{let{row:t,isCustomPopUpOpen:a,setIsCustomPopUpOpen:s}=e;return a?(0,j.jsx)(o.A,{isOpen:a,onClose:()=>s(!1),children:(0,j.jsx)("p",{children:(0,d.A)(t.createdAt,"fullDate")})}):(0,j.jsx)("p",{onClick:()=>s(!0),children:(0,d.A)(t.createdAt,"justYear")})},sort:!0},{name:"updatedAt",headerName:"updatedAt",getCell:e=>{let{row:t}=e;return(0,d.A)(t.updatedAt,"justYear")},hidden:!0,sort:!0},{name:"option",headerName:"options",getCell:e=>{let{row:t,setSelectedItems:a,setIsPopUpOpen:s,returnRow:n}=e;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("i",{onClick:()=>{s(!0),a(new Set([t._id]))},className:"fa-solid fa-trash-can",title:"delete"}),(0,j.jsx)("i",{className:"fa-solid fa-pen-to-square icon-edit",title:"update",onClick:()=>n(t)})]})}}],y=new m.A("types"),C=()=>{const[e,t]=(0,r.useState)(1),[a,o]=(0,r.useState)({}),[d,m]=(0,r.useState)(new Set),[u,h]=(0,r.useState)({from:"",to:"",createdBy:""}),[C,F]=(0,r.useState)(""),[b]=(0,l.d7)(C,1e3),w=(0,r.useMemo)(()=>["types",e,a,u,b],[e,a,u,b]),{data:N,isLoading:k}=(0,s.I)({queryKey:w,queryFn:()=>y.getAll({page:e,sort:a,filters:u,limit:10,search:C}),keepPreviousData:!0}),P=(0,n.jE)(),[I,D]=(0,r.useState)(!1),q=(0,i.n)({mutationKey:w,mutationFn:e=>y.addData({data:e,isFormData:!0})}),K=(0,i.n)({mutationKey:w,mutationFn:e=>y.updateData({id:null===I||void 0===I?void 0:I._id,data:e,isFormData:!0})}),O=(0,p.Wx)({enableReinitialize:!0,initialValues:{name:I.name||"",image:null,previewImage:(null===I||void 0===I?void 0:I.image)&&(I.image.startsWith("http")?I.image:"".concat(S.b).concat(I.image))},validationSchema:A.Ik({name:A.Yj().min(2,"Name must be at least 2 characters")}),onSubmit:e=>{const t=new FormData;t.append("name",e.name),e.image&&t.append("image",e.image),(I?K:q).mutate(t,{onSuccess:()=>{O.resetForm(),P.invalidateQueries({queryKey:["types"]}),D(!1)}})}}),R=(0,r.useCallback)(()=>{D(!1),O.resetForm()},[O]);return(0,j.jsxs)("div",{className:"table-with-form-container",children:[(0,j.jsx)(v.A,{onSubmit:O.handleSubmit,buttonProps:{isSending:q.isPending||K.isPending},header:I?"\u062a\u062d\u062f\u064a\u062b \u0635\u0646\u0641":"\u0627\u0636\u0627\u0641\u0629 \u0635\u0646\u0641 \u062c\u062f\u064a\u062f",isUpdate:I,oncancel:R,children:(0,j.jsx)(g.A,{placeholder:"Enter name",title:"Name",name:"name",value:O.values.name,onChange:O.handleChange,errorText:O.touched.name&&O.errors.name})}),(0,j.jsx)(c.A,{colmuns:f,loading:k,currentPage:e,setPage:t,data:null===N||void 0===N?void 0:N.data,dataLength:null===N||void 0===N?void 0:N.totalCount,setSort:o,selectedItems:d,setSelectedItems:m,delelteEndPoint:"types",queryKey:"types",heading:"\u0627\u0644\u0627\u0635\u0646\u0627\u0641",setSearch:F,returnRow:D,selectable:!0,children:(0,j.jsx)(x,{filters:u,setFilters:h})})]})}}}]);
//# sourceMappingURL=672.71dab347.chunk.js.map