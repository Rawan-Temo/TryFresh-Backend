{"version":3,"file":"static/js/672.71dab347.chunk.js","mappings":"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","sources":["pages/dashboard/pages/type/Filters.jsx","pages/dashboard/pages/type/Type.jsx"],"sourcesContent":["import ConfrimAndRestBtns from \"../../../../components/tableFilters/ConfrimAndRestBtns\";\r\nimport InputsContainer from \"../../../../components/tableFilters/InputsContainer\";\r\nimport { useFormik } from \"formik\";\r\nimport Input from \"../../../../components/inputs/Input\";\r\n\r\nconst Filters = ({ filters, setFilters }) => {\r\n  const formik = useFormik({\r\n    initialValues: filters,\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <InputsContainer>\r\n        <Input title=\"test filter\" />\r\n      </InputsContainer>\r\n      <InputsContainer>\r\n        <Input title=\"test filter\" />\r\n        <Input title=\"test filter\" />\r\n        <Input title=\"test filter\" />\r\n      </InputsContainer>\r\n      <ConfrimAndRestBtns\r\n        values={formik.values}\r\n        resetForm={formik.resetForm}\r\n        setFilters={setFilters}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Filters;\r\n","import { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\r\nimport { useCallback, useMemo, useState } from \"react\";\r\nimport { useDebounce } from \"use-debounce\";\r\nimport PopUp from \"../../../../components/popup/PopUp\";\r\nimport dateFormatter from \"./../../../../utils/dateFormatter\";\r\nimport APIClient from \"./../../../../utils/ApiClient\";\r\n\r\nimport Table from \"../../../../components/table/Table\";\r\nimport Filters from \"./Filters\";\r\nimport { useFormik } from \"formik\";\r\nimport * as yup from \"yup\";\r\nimport FormContainer from \"../../../../components/formContainer/FormContainer\";\r\nimport Input from \"../../../../components/inputs/Input\";\r\nimport { imageUrl } from \"../../../../utils/axios\";\r\nconst columns = [\r\n  {\r\n    name: \"image\",\r\n    headerName: \"image\",\r\n    getCell: ({ row }) =>\r\n      row.image ? (\r\n        <img\r\n          src={\r\n            row.image.startsWith(\"http\")\r\n              ? row.image\r\n              : `${imageUrl}/${row.image}`\r\n          }\r\n          alt={row.name}\r\n          style={{\r\n            width: 50,\r\n            height: 50,\r\n            objectFit: \"cover\",\r\n            borderRadius: \"8px\",\r\n          }}\r\n        />\r\n      ) : (\r\n        <span style={{ color: \"#999\" }}>No image</span>\r\n      ),\r\n  },\r\n  {\r\n    name: \"name\",\r\n    headerName: \"name\",\r\n    sort: true,\r\n  },\r\n  {\r\n    name: \"createdAt\",\r\n    headerName: \"created at\",\r\n    getCell: ({ row, isCustomPopUpOpen, setIsCustomPopUpOpen }) =>\r\n      isCustomPopUpOpen ? (\r\n        <PopUp\r\n          isOpen={isCustomPopUpOpen}\r\n          onClose={() => setIsCustomPopUpOpen(false)}\r\n        >\r\n          <p>{dateFormatter(row.createdAt, \"fullDate\")}</p>\r\n        </PopUp>\r\n      ) : (\r\n        <p onClick={() => setIsCustomPopUpOpen(true)}>\r\n          {dateFormatter(row.createdAt, \"justYear\")}\r\n        </p>\r\n      ),\r\n    sort: true,\r\n  },\r\n  {\r\n    name: \"updatedAt\",\r\n    headerName: \"updatedAt\",\r\n    getCell: ({ row }) => dateFormatter(row.updatedAt, \"justYear\"),\r\n    hidden: true,\r\n    sort: true,\r\n  },\r\n  {\r\n    name: \"option\",\r\n    headerName: \"options\",\r\n    getCell: ({ row, setSelectedItems, setIsPopUpOpen, returnRow }) => (\r\n      <>\r\n        <i\r\n          onClick={() => {\r\n            setIsPopUpOpen(true);\r\n            setSelectedItems(new Set([row._id]));\r\n          }}\r\n          className=\"fa-solid fa-trash-can\"\r\n          title=\"delete\"\r\n        />\r\n        <i\r\n          className=\"fa-solid fa-pen-to-square icon-edit\"\r\n          title=\"update\"\r\n          onClick={() => returnRow(row)}\r\n        />\r\n      </>\r\n    ),\r\n  },\r\n];\r\n\r\nconst apiClient = new APIClient(\"types\");\r\n\r\nconst TypeTable = () => {\r\n  const [page, setPage] = useState(1);\r\n  const [sort, setSort] = useState({});\r\n  const [selectedItems, setSelectedItems] = useState(new Set());\r\n  const [filters, setFilters] = useState({ from: \"\", to: \"\", createdBy: \"\" });\r\n  const [search, setSearch] = useState(\"\");\r\n  const [debouncedSearch] = useDebounce(search, 1000);\r\n\r\n  const queryKey = useMemo(\r\n    () => [\"types\", page, sort, filters, debouncedSearch],\r\n    [page, sort, filters, debouncedSearch]\r\n  );\r\n\r\n  const { data, isLoading } = useQuery({\r\n    queryKey,\r\n    queryFn: () => apiClient.getAll({ page, sort, filters, limit: 10, search }),\r\n    keepPreviousData: true,\r\n  });\r\n\r\n  const queryClient = useQueryClient();\r\n  const [isUpdate, setIsUpdate] = useState(false);\r\n\r\n  const addType = useMutation({\r\n    mutationKey: queryKey,\r\n    mutationFn: (formData) =>\r\n      apiClient.addData({ data: formData, isFormData: true }),\r\n  });\r\n\r\n  const updateType = useMutation({\r\n    mutationKey: queryKey,\r\n    mutationFn: (formData) =>\r\n      apiClient.updateData({\r\n        id: isUpdate?._id,\r\n        data: formData,\r\n        isFormData: true,\r\n      }),\r\n  });\r\n\r\n  const formik = useFormik({\r\n    enableReinitialize: true,\r\n    initialValues: {\r\n      name: isUpdate.name || \"\",\r\n      image: null,\r\n      previewImage:\r\n        isUpdate?.image &&\r\n        (isUpdate.image.startsWith(\"http\")\r\n          ? isUpdate.image\r\n          : `${imageUrl}${isUpdate.image}`),\r\n    },\r\n    validationSchema: yup.object({\r\n      name: yup.string().min(2, \"Name must be at least 2 characters\"),\r\n    }),\r\n    onSubmit: (values) => {\r\n      const formData = new FormData();\r\n      formData.append(\"name\", values.name);\r\n      if (values.image) formData.append(\"image\", values.image);\r\n\r\n      (isUpdate ? updateType : addType).mutate(formData, {\r\n        onSuccess: () => {\r\n          formik.resetForm();\r\n          queryClient.invalidateQueries({ queryKey: [\"types\"] });\r\n          setIsUpdate(false);\r\n        },\r\n      });\r\n    },\r\n  });\r\n\r\n  const handleCancelForm = useCallback(() => {\r\n    setIsUpdate(false);\r\n    formik.resetForm();\r\n  }, [formik]);\r\n\r\n  return (\r\n    <div className=\"table-with-form-container\">\r\n      <FormContainer\r\n        onSubmit={formik.handleSubmit}\r\n        buttonProps={{ isSending: addType.isPending || updateType.isPending }}\r\n        header={isUpdate ? \"تحديث صنف\" : \"اضافة صنف جديد\"}\r\n        isUpdate={isUpdate}\r\n        oncancel={handleCancelForm}\r\n      >\r\n        <Input\r\n          placeholder=\"Enter name\"\r\n          title=\"Name\"\r\n          name=\"name\"\r\n          value={formik.values.name}\r\n          onChange={formik.handleChange}\r\n          errorText={formik.touched.name && formik.errors.name}\r\n        />\r\n      </FormContainer>\r\n\r\n      <Table\r\n        colmuns={columns}\r\n        loading={isLoading}\r\n        currentPage={page}\r\n        setPage={setPage}\r\n        data={data?.data}\r\n        dataLength={data?.totalCount}\r\n        setSort={setSort}\r\n        selectedItems={selectedItems}\r\n        setSelectedItems={setSelectedItems}\r\n        delelteEndPoint=\"types\"\r\n        queryKey={\"types\"}\r\n        heading={\"الاصناف\"}\r\n        setSearch={setSearch}\r\n        returnRow={setIsUpdate}\r\n        selectable\r\n      >\r\n        <Filters filters={filters} setFilters={setFilters} />\r\n      </Table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TypeTable;\r\n"],"names":["_ref","filters","setFilters","formik","useFormik","initialValues","_jsxs","_Fragment","children","_jsx","InputsContainer","Input","title","ConfrimAndRestBtns","values","resetForm","columns","name","headerName","getCell","row","image","src","startsWith","concat","imageUrl","alt","style","width","height","objectFit","borderRadius","color","sort","_ref2","isCustomPopUpOpen","setIsCustomPopUpOpen","PopUp","isOpen","onClose","dateFormatter","createdAt","onClick","_ref3","updatedAt","hidden","_ref4","setSelectedItems","setIsPopUpOpen","returnRow","Set","_id","className","apiClient","APIClient","TypeTable","page","setPage","useState","setSort","selectedItems","from","to","createdBy","search","setSearch","debouncedSearch","useDebounce","queryKey","useMemo","data","isLoading","useQuery","queryFn","getAll","limit","keepPreviousData","queryClient","useQueryClient","isUpdate","setIsUpdate","addType","useMutation","mutationKey","mutationFn","formData","addData","isFormData","updateType","updateData","id","enableReinitialize","previewImage","validationSchema","yup","min","onSubmit","FormData","append","mutate","onSuccess","invalidateQueries","handleCancelForm","useCallback","FormContainer","handleSubmit","buttonProps","isSending","isPending","header","oncancel","placeholder","value","onChange","handleChange","errorText","touched","errors","Table","colmuns","loading","currentPage","dataLength","totalCount","delelteEndPoint","heading","selectable","Filters"],"sourceRoot":""}