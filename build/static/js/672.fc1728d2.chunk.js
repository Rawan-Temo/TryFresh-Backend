"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[672],{1779:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var s=a(8261),i=a(3248),n=a(7097),l=a(5043),r=a(2970),o=a(7562),d=a(156),m=a(9193),c=a(6046),u=a(5679),p=a(6963),g=a(3892),h=a(4061),j=a(579);const x=e=>{let{filters:t,setFilters:a}=e;const s=(0,g.Wx)({initialValues:t});return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(p.A,{children:(0,j.jsx)(h.A,{title:"test filter"})}),(0,j.jsxs)(p.A,{children:[(0,j.jsx)(h.A,{title:"test filter"}),(0,j.jsx)(h.A,{title:"test filter"}),(0,j.jsx)(h.A,{title:"test filter"})]}),(0,j.jsx)(u.A,{values:s.values,resetForm:s.resetForm,setFilters:a})]})};var v=a(899),A=a(4263),y=a(4473);console.log(y.b);const w=[{name:"image",headerName:"image",getCell:e=>{let{row:t}=e;return t.image?(0,j.jsx)("img",{src:t.image.startsWith("http")?t.image:"".concat(y.b,"/").concat(t.image),alt:t.name,style:{width:50,height:50,objectFit:"cover",borderRadius:"8px"}}):(0,j.jsx)("span",{style:{color:"#999"},children:"No image"})}},{name:"name",headerName:"name",sort:!0},{name:"createdAt",headerName:"created at",getCell:e=>{let{row:t,isCustomPopUpOpen:a,setIsCustomPopUpOpen:s}=e;return a?(0,j.jsx)(o.A,{isOpen:a,onClose:()=>s(!1),children:(0,j.jsx)("p",{children:(0,d.A)(t.createdAt,"fullDate")})}):(0,j.jsx)("p",{onClick:()=>s(!0),children:(0,d.A)(t.createdAt,"justYear")})},sort:!0},{name:"updatedAt",headerName:"updatedAt",getCell:e=>{let{row:t}=e;return(0,d.A)(t.updatedAt,"justYear")},hidden:!0,sort:!0},{name:"option",headerName:"options",getCell:e=>{let{row:t,setSelectedItems:a,setIsPopUpOpen:s,returnRow:i}=e;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("i",{onClick:()=>{s(!0),a(new Set([t._id]))},className:"fa-solid fa-trash-can",title:"delete"}),(0,j.jsx)("i",{className:"fa-solid fa-pen-to-square icon-edit",title:"update",onClick:()=>i(t)})]})}}],b=new m.A("types"),f=()=>{const[e,t]=(0,l.useState)(1),[a,o]=(0,l.useState)({}),[d,m]=(0,l.useState)(new Set),[u,p]=(0,l.useState)({from:"",to:"",createdBy:""}),[f,F]=(0,l.useState)(""),[S]=(0,r.d7)(f,1e3),C=(0,l.useMemo)(()=>["types",e,a,u,S],[e,a,u,S]),{data:I,isLoading:N}=(0,s.I)({queryKey:C,queryFn:()=>b.getAll({page:e,sort:a,filters:u,limit:10,search:f}),keepPreviousData:!0}),P=(0,i.jE)(),[k,D]=(0,l.useState)(!1),R=(0,n.n)({mutationKey:C,mutationFn:e=>b.addData({data:e,isFormData:!0})}),U=(0,n.n)({mutationKey:C,mutationFn:e=>b.updateData({id:null===k||void 0===k?void 0:k._id,data:e,isFormData:!0})}),q=(0,g.Wx)({enableReinitialize:!0,initialValues:{name:k.name||"",image:null,previewImage:(null===k||void 0===k?void 0:k.image)&&(k.image.startsWith("http")?k.image:"".concat(y.b).concat(k.image))},validationSchema:v.Ik({name:v.Yj().min(2,"Name must be at least 2 characters")}),onSubmit:e=>{const t=new FormData;t.append("name",e.name),e.image&&t.append("image",e.image),console.log(k),(k?U:R).mutate(t,{onSuccess:()=>{q.resetForm(),P.invalidateQueries({queryKey:["types"]}),D(!1)}})}}),K=(0,l.useCallback)(()=>{D(!1),q.resetForm()},[q]);return(0,j.jsxs)("div",{className:"table-with-form-container",children:[(0,j.jsxs)(A.A,{onSubmit:q.handleSubmit,buttonProps:{isSending:R.isPending||U.isPending},header:k?"update type":"add type",isUpdate:k,oncancel:K,children:[(0,j.jsx)(h.A,{placeholder:"Enter name",title:"Name",name:"name",value:q.values.name,onChange:q.handleChange,errorText:q.touched.name&&q.errors.name}),(0,j.jsx)(h.A,{title:"Image",name:"image",type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];q.setFieldValue("image",t),q.setFieldValue("previewImage",URL.createObjectURL(t))}}),console.log(q.values.previewImage),q.values.previewImage&&(0,j.jsx)("img",{src:q.values.previewImage,alt:"Preview",style:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"8px"}})]}),(0,j.jsx)(c.A,{colmuns:w,loading:N,currentPage:e,setPage:t,data:null===I||void 0===I?void 0:I.data,dataLength:null===I||void 0===I?void 0:I.totalCount,setSort:o,selectedItems:d,setSelectedItems:m,delelteEndPoint:"types",queryKey:"types",heading:"types",setSearch:F,returnRow:D,selectable:!0,children:(0,j.jsx)(x,{filters:u,setFilters:p})})]})}}}]);
//# sourceMappingURL=672.fc1728d2.chunk.js.map